# Makefile.in

CPP = @CPP@
CPPFLAGS = @CPPFLAGS@

MPIFC = @MPIFC@
FCFLAGS = @FCFLAGS@

objects = $(addsuffix .o,\
  module_namelist module_RT_data module_gw_gw2d_data)

all: libData_Rec.a

libData_Rec.a: $(objects)
	ar -r $@ $?

module_namelist.o: module_namelist.f
	$(MPIFC) -o $@ $(FCFLAGS) -I../MPP $<

module_RT_data.o: module_RT_data.f
	$(MPIFC) -o $@ $(FCFLAGS) -I../Routing/Overland $<

module_gw_gw2d_data.o: module_gw_gw2d_data.f
	$(MPIFC) -o $@ $(FCFLAGS) $<

%.f: %.F
	$(CPP) $(CPPFLAGS) $(NETCDF4_CFLAGS) $< > $@

clean:
	rm -f *.o *.mod *.stb *~ *.f libData_Rec.a
