# Makefile.in

.PHONY: all clean

CPP = @CPP@
CPPFLAGS = @CPPFLAGS@
MPIFC = @MPIFC@
FCFLAGS = @FCFLAGS@

include ../global.mk

objects = module_HYDRO_drv.o \
          $(addprefix ../Data_Rec/,$(Data_Rec_objects)) \
          $(addprefix ../Routing/,module_GW_baseflow.o \
          module_HYDRO_utils.o module_HYDRO_io.o module_RT.o)

all: libHYDRO_drv.a

libHYDRO_drv.a: $(objects)
	ar -r $@ $?

$(objects): %.o: %.f
	$(MPIFC) -o $@ $(FCFLAGS) -I../Routing -I../MPP -I../Data_Rec $<

%.f: %.F
	$(CPP) $(CPPFLAGS) $< > $@

clean:
	rm -f *.o *.mod *.stb *~ *.f
