# Makefile.in

.PHONY: all clean

CPP = @CPP@
CPPFLAGS = $(strip @CPPFLAGS@)
DEFS = @DEFS@

MPIFC = @MPIFC@
FCFLAGS = $(strip @FCFLAGS@)
NETCDF4_FFLAGS = @NETCDF4_FFLAGS@

include ../global.mk

all: module_HYDRO_drv.o

module_HYDRO_drv.o: %.o: %.f ../MPP/mpp_land.o \
                    $(addprefix	../Routing/,\
                                module_GW_baseflow.o		\
                                Overland/module_overland.o)	\
                    ../Data_Rec/module_namelist.o
	$(MPIFC) -o $@ $(FCFLAGS) $(NETCDF4_FFLAGS) $(addprefix -I,$(^D)) $<

%.f: %.F
	$(CPP) $(CPPFLAGS) $(DEFS) $(NETCDF4_FFLAGS) $< > $@

clean:
	rm -f *.o *.mod *.stb *~ *.f
