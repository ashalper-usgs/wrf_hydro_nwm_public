# Makefile.in

# simple compilation test for modules in overland routing

.PHONY: all test clean

FC = @FC@
FFLAGS = @FFLAGS@
FCFLAGS = @FCFLAGS@

objects = \
  $(addsuffix .o,\
    $(addprefix module_overland_,control streams_and_lakes	\
	routing_properties mass_balance))

all: ../../libHYDRO.a

../../libHYDRO.a: module_overland.o
	ar -r $@ $?

$(objects): %.o: %.F
	$(FC) $(FCFLAGS) $<

module_overland.o: %.o: %.F module_overland_control.o \
                   module_overland_streams_and_lakes.o \
                   module_overland_routing_properties.o \
                   module_overland_mass_balance.o
	$(FC) $(FCFLAGS) $<

test: overland_tests

overland_tests: overland_tests.o $(objects)
	$(FC) $(FCFLAGS) -o overland_tests $(objects) $<

overland_tests.o:
	$(FC) $(FCFLAGS) overland_tests.F

clean:
	rm -f *.o *.mod overland_tests *~
