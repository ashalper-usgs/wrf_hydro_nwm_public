# Makefile.in

.SUFFIXES:
.SUFFIXES: .o .F

WRF_HYDRO = @WRF_HYDRO@
HYDRO_D = @HYDRO_D@
SPATIAL_SOIL = @SPATIAL_SOIL@
WRF_HYDRO_RAPID = @WRF_HYDRO_RAPID@
WRFIO_NCD_LARGE_FILE_SUPPORT = @WRFIO_NCD_LARGE_FILE_SUPPORT@
NCEP_WCOSS = @NCEP_WCOSS@
WRF_HYDRO_NUDGING = @WRF_HYDRO_NUDGING@

CPP = @CPP@
CPPFLAGS = @CPPFLAGS@
MPIFC = @MPIFC@
# the supplemental flags below might not be necessary for non-gfortran
# pedigree compilers
FCFLAGS = @FCFLAGS@ -w -c -ffree-form

OBJS = CPL_WRF.o mpp_land.o module_mpp_ReachLS.o module_mpp_GWBUCKET.o

all: $(OBJS)

mpp_land.o: mpp_land.F
	$(MPIFC) $(FCFLAGS) $(*).F

CPL_WRF.o: CPL_WRF.F
	$(CPP) $(CPPFLAGS) $(*).F > $(*).f
	$(MPIFC) -o $(@) $(FCFLAGS) $(*).f
	$(MPIFC) $(FCFLAGS) $(*).F

module_mpp_ReachLS.o: module_mpp_ReachLS.F
	$(MPIFC) $(FCFLAGS) $(*).F

module_mpp_GWBUCKET.o: module_mpp_GWBUCKET.F
	$(MPIFC) $(FCFLAGS) $(*).F

clean:
	rm -f *.o *.mod *.f *.stb *~
